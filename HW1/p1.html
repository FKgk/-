<!DOCTYPE html>
<html>
<head>
   <title>
      cal
   </title>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/5.8.0/math.js"></script>
   
</head>
<body>
   <input type="text" id="input">
   <div id="result"></div>
   <table>
      <tr>
         <td><input type="button" id="clear" value="c"></td>
         <td><input type="button" id="bracket" value="()"></td>
         <td><input type="button" id="o4" value="%"></td>
         <td><input type="button" id="o3" value="/"></td>
         <td><input type="button" id="copyApaste" value="copy&paste"</td>
      </tr>
      <tr>
         <td><input type="button" id="n1" value="1"></td>
         <td><input type="button" id="n2" value="2"></td>
         <td><input type="button" id="n3" value="3"></td>
         <td><input type="button" id="o2" value="*"></td>
      </tr>
      <tr>
         <td><input type="button" id="n4" value="4"></td>
         <td><input type="button" id="n5" value="5"></td>
         <td><input type="button" id="n6" value="6"></td>
         <td><input type="button" id="o1" value="-"></td>
      </tr>
      <tr>
         <td><input type="button" id="n7" value="7"></td>
         <td><input type="button" id="n8" value="8"></td>
         <td><input type="button" id="n9" value="9"></td>
         <td><input type="button" id="o0" value="+"></td>
      </tr>
      <tr>
         <td><input type="button" id="n0" value="0"></td>
         <td><input type="button" id="o5" value="."></td>
         <td><input type="button" id="enter" value="="></td>
      </tr>
   </table>
   <table>
   </table>
</body>
<script>
   var result = document.getElementById('result');
   var input = document.getElementById('input');
   var enter = document.getElementById('enter');
   var clear = document.getElementById('clear');
   var numberButtons = [0,0,0,0,0, 0, 0, 0, 0, 0];
   var operations = [ '+','-','*','/','%','.'];
   var operationButtons = [];
   var copyString = "";
   var copyApaste = document.getElementById('copyApaste');
   for(let i = 0; i < numberButtons.length; i++)
   {
      numberButtons[i] = document.getElementById("n" + i);

      numberButtons[i].addEventListener('click', function(){
         input.value += numberButtons[i].value;
         cosole.log("numberButtons[" + i + "] (" + numberButtons[i].value + ") : input.value = " + input.value);
      });
   }

   for(let i = 0; i < operations.length; i++)
   {
      operationButtons[i] = document.getElementById("o"+i);

      operationButtons[i].addEventListener('click', function(){
         input.value += operations[i];
         cosole.log("operationButtons[" + i + "] (" + operations[i] + ") : input.value = " + input.value);
      });
   }

   enter.addEventListener('click', function(){
      result.innerHTML = eval(input.value);
      cosole.log("enter : result.value = " + result.innerHTML);
   });

   clear.addEventListener('click', function(){
      input.value = "";
      cosole.log("clear : input.value = " + input.value);
   });
   copyApaste.addEventListener('click', function(){
      let txt = "";
      if (window.getSelection) {
         txt = window.getSelection();
      } else if (document.getSelection) {
         txt = document.getSelection();
      } else if (document.selection) {
         txt = document.selection.createRange().text;
      } else {
         console.log("Erorr copytApaste");
      }
      if(txt == "")
      {
         input.value += copyString;
         console.log("copyApaste : " + input.value + " + " + copyString);
      }
      else
      {
         copyString = txt;
         console.log("copyApaste : " + "copyString = " + copyString);
      }  
   });
</script>
</html>